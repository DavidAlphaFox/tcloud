define(["pageServices"],function(_ps) {
        //在线客服 begin
    var showQQD = '<div id="wqdShowQQD">\
                        <div class="serQQ color1" name="defBg">\
                            <div class="img_phone color1" name="defIcon"><svg xmlns="http://www.w3.org/2000/svg" class="wqd-svgicon" style="width(32px);width: 32px;height: 32px;float: left;margin: 4px 0 0 3px;" viewBox="-250 -250 2392 2392"><path fill="#fff" d="M 1700 1405.68 C 1700 1423.58 1696.69 1446.95 1690.06 1475.78 C 1683.43 1504.62 1676.47 1527.32 1669.18 1543.89 C 1655.26 1577.04 1614.82 1612.17 1547.87 1649.29 C 1485.56 1683.1 1423.91 1700 1362.93 1700 C 1345.03 1700 1327.63 1698.84 1310.72 1696.52 C 1293.82 1694.2 1274.76 1690.06 1253.55 1684.09 C 1232.34 1678.13 1216.6 1673.32 1206.32 1669.67 C 1196.05 1666.03 1177.65 1659.23 1151.14 1649.29 C 1124.62 1639.35 1108.38 1633.38 1102.41 1631.39 C 1037.45 1608.19 979.451 1580.68 928.409 1548.86 C 843.561 1496.5 755.895 1425.07 665.412 1334.59 C 574.929 1244.11 503.504 1156.44 451.136 1071.59 C 419.318 1020.55 391.809 962.547 368.608 897.585 C 366.619 891.619 360.653 875.379 350.71 848.864 C 340.767 822.349 333.973 803.954 330.327 793.679 C 326.681 783.404 321.875 767.661 315.909 746.449 C 309.943 725.237 305.8 706.179 303.48 689.276 C 301.16 672.372 300 654.972 300 637.074 C 300 576.089 316.903 514.441 350.71 452.131 C 387.831 385.18 422.964 344.744 456.108 330.824 C 472.68 323.532 495.384 316.572 524.219 309.943 C 553.054 303.314 576.42 300 594.318 300 C 603.599 300 610.559 300.994 615.199 302.983 C 627.131 306.96 644.697 332.15 667.898 378.551 C 675.189 391.146 685.133 409.044 697.727 432.244 C 710.322 455.445 721.922 476.491 732.528 495.384 C 743.134 514.276 753.409 532.008 763.352 548.58 C 765.341 551.231 771.141 559.517 780.753 573.438 C 790.365 587.358 797.491 599.124 802.131 608.736 C 806.771 618.348 809.091 627.794 809.091 637.074 C 809.091 650.331 799.645 666.903 780.753 686.79 C 761.861 706.676 741.312 724.905 719.105 741.477 C 696.899 758.049 676.349 775.616 657.457 794.176 C 638.565 812.737 629.119 827.983 629.119 839.915 C 629.119 845.881 630.776 853.338 634.091 862.287 C 637.405 871.236 640.223 878.03 642.543 882.67 C 644.863 887.311 649.503 895.265 656.463 906.534 C 663.423 917.803 667.235 924.1 667.898 925.426 C 718.276 1016.24 775.947 1094.13 840.909 1159.09 C 905.871 1224.05 983.759 1281.72 1074.57 1332.1 C 1075.9 1332.77 1082.2 1336.58 1093.47 1343.54 C 1104.73 1350.5 1112.69 1355.14 1117.33 1357.46 C 1121.97 1359.78 1128.76 1362.59 1137.71 1365.91 C 1146.66 1369.22 1154.12 1370.88 1160.09 1370.88 C 1172.02 1370.88 1187.26 1361.43 1205.82 1342.54 C 1224.38 1323.65 1241.95 1303.1 1258.52 1280.89 C 1275.09 1258.69 1293.32 1238.14 1313.21 1219.25 C 1333.1 1200.36 1349.67 1190.91 1362.93 1190.91 C 1372.21 1190.91 1381.65 1193.23 1391.26 1197.87 C 1400.88 1202.51 1412.64 1209.64 1426.56 1219.25 C 1440.48 1228.86 1448.77 1234.66 1451.42 1236.65 C 1467.99 1246.59 1485.72 1256.87 1504.62 1267.47 C 1523.51 1278.08 1544.55 1289.68 1567.76 1302.27 C 1590.96 1314.87 1608.85 1324.81 1621.45 1332.1 C 1667.85 1355.3 1693.04 1372.87 1697.02 1384.8 C 1699.01 1389.44 1700 1396.4 1700 1405.68 L 1700 1405.68 Z" /></svg></div>\
                        </div>\
                        <div class="serShow color1" name="openBg" >\
                            <div class="header">\
                                <div class="img_phone color" name="openIcon"></div>\
                                <span class="color1" name="openTitle"><svg xmlns="http://www.w3.org/2000/svg"  class="wqd-svgicon" style="width(32px);width: 32px;height: 32px;float: left;margin: 4px 0 0 -2px;" viewBox="-250 -250 2392 2392"><path name="openIcon" fill="#fff" d="M 1700 1405.68 C 1700 1423.58 1696.69 1446.95 1690.06 1475.78 C 1683.43 1504.62 1676.47 1527.32 1669.18 1543.89 C 1655.26 1577.04 1614.82 1612.17 1547.87 1649.29 C 1485.56 1683.1 1423.91 1700 1362.93 1700 C 1345.03 1700 1327.63 1698.84 1310.72 1696.52 C 1293.82 1694.2 1274.76 1690.06 1253.55 1684.09 C 1232.34 1678.13 1216.6 1673.32 1206.32 1669.67 C 1196.05 1666.03 1177.65 1659.23 1151.14 1649.29 C 1124.62 1639.35 1108.38 1633.38 1102.41 1631.39 C 1037.45 1608.19 979.451 1580.68 928.409 1548.86 C 843.561 1496.5 755.895 1425.07 665.412 1334.59 C 574.929 1244.11 503.504 1156.44 451.136 1071.59 C 419.318 1020.55 391.809 962.547 368.608 897.585 C 366.619 891.619 360.653 875.379 350.71 848.864 C 340.767 822.349 333.973 803.954 330.327 793.679 C 326.681 783.404 321.875 767.661 315.909 746.449 C 309.943 725.237 305.8 706.179 303.48 689.276 C 301.16 672.372 300 654.972 300 637.074 C 300 576.089 316.903 514.441 350.71 452.131 C 387.831 385.18 422.964 344.744 456.108 330.824 C 472.68 323.532 495.384 316.572 524.219 309.943 C 553.054 303.314 576.42 300 594.318 300 C 603.599 300 610.559 300.994 615.199 302.983 C 627.131 306.96 644.697 332.15 667.898 378.551 C 675.189 391.146 685.133 409.044 697.727 432.244 C 710.322 455.445 721.922 476.491 732.528 495.384 C 743.134 514.276 753.409 532.008 763.352 548.58 C 765.341 551.231 771.141 559.517 780.753 573.438 C 790.365 587.358 797.491 599.124 802.131 608.736 C 806.771 618.348 809.091 627.794 809.091 637.074 C 809.091 650.331 799.645 666.903 780.753 686.79 C 761.861 706.676 741.312 724.905 719.105 741.477 C 696.899 758.049 676.349 775.616 657.457 794.176 C 638.565 812.737 629.119 827.983 629.119 839.915 C 629.119 845.881 630.776 853.338 634.091 862.287 C 637.405 871.236 640.223 878.03 642.543 882.67 C 644.863 887.311 649.503 895.265 656.463 906.534 C 663.423 917.803 667.235 924.1 667.898 925.426 C 718.276 1016.24 775.947 1094.13 840.909 1159.09 C 905.871 1224.05 983.759 1281.72 1074.57 1332.1 C 1075.9 1332.77 1082.2 1336.58 1093.47 1343.54 C 1104.73 1350.5 1112.69 1355.14 1117.33 1357.46 C 1121.97 1359.78 1128.76 1362.59 1137.71 1365.91 C 1146.66 1369.22 1154.12 1370.88 1160.09 1370.88 C 1172.02 1370.88 1187.26 1361.43 1205.82 1342.54 C 1224.38 1323.65 1241.95 1303.1 1258.52 1280.89 C 1275.09 1258.69 1293.32 1238.14 1313.21 1219.25 C 1333.1 1200.36 1349.67 1190.91 1362.93 1190.91 C 1372.21 1190.91 1381.65 1193.23 1391.26 1197.87 C 1400.88 1202.51 1412.64 1209.64 1426.56 1219.25 C 1440.48 1228.86 1448.77 1234.66 1451.42 1236.65 C 1467.99 1246.59 1485.72 1256.87 1504.62 1267.47 C 1523.51 1278.08 1544.55 1289.68 1567.76 1302.27 C 1590.96 1314.87 1608.85 1324.81 1621.45 1332.1 C 1667.85 1355.3 1693.04 1372.87 1697.02 1384.8 C 1699.01 1389.44 1700 1396.4 1700 1405.68 L 1700 1405.68 Z" /></svg>客户服务</span>\
                            </div>\
                            <div class="down">\
                                <ul id="serverNumber"></ul>\
                                <div class="shuoming color1" name="openContent">在线时间：<br>周一到周五<br>早9:00~18:00<br>周六周日休息<br></div>\
                            </div>\
                        </div>\
                    </div>';
    $("#wqdShowQQD").length || $(showQQD).appendTo("body");
    function wqdServerFunc() {
        //QQ客服
        //打开关闭客户功能
        $(".serset-box .ser-select").off("click.QQServ")
        .on("click.QQServ", ".QQserverCheck", function() {
            if ($(this).is(":checked")) {
                $("#wqdShowQQD .serQQ").animate({
                    'right': "0px"
                }, 350);
                //开启客服功能
                _ps.wqdServerBegin(_ps.QQarrObj);
            } else { //取消
                $("#wqdShowQQD .serQQ").animate({
                    'right': "-40px"
                }, 350);
                //关闭客服功能
                _ps.wqdServerClose();
            }
        });

        $("#wqdpageHeaderD .icon-list .station").on("click",function(e) {
            $(".colorpicker.dropdown-menu").remove();
            $('.ul-select .wqdColorPicker').colorpicker().colorpicker('destroy').colorpicker({
                format: false,
                colorSelectors: {
                    '#777777': 'rgba(119, 119, 119,1)',
                    '#337ab7': 'rgba(51, 122, 183,1)',
                    '#5cb85c': 'rgba(92, 184, 92,1)',
                    '#5bc0de': 'rgba(91, 192, 222,1)',
                    '#f0ad4e': 'rgba(240, 173, 78,1)',
                    '#d9534f': 'rgba(217, 83, 79,1)'
                }
            });
        })

        $(".serset-box .ul-select").off("click", "input")
        .on("click", "input", function() {
            if ($(this).parent().index() > 1) {
                $("#wqdShowQQD .serShow").addClass('on');
            } else {
                $("#wqdShowQQD .serShow").removeClass('on');
            }
            $(this).parents(".ul-select").addClass("on");
        });

        $('.ul-select .wqdColorPicker').on("changeColor",function() {
            // $(this).blur().colorpicker('hide');
            var value = $(this).val();
            $(this).attr("value", value);
            var type = $(this).attr("type");
            var name = $.trim( $(this).attr("name") );
            if (type == "type1") {
                $(".color1[name=" + name + "]").css("background-color", value)
            } else if (type == "type2") {
                name=='openIcon'&&$("path[name='openIcon']").attr("fill", value);
                $(".color1[name=" + name + "]").css("color", value);
            }
            _ps.QQarrObj[name] = value;
        });
        //移除ul-select上的类on
        $("body").on("click", function(e) {
            if (!$(e.target).closest(".select-box").length && !$(e.target).closest(".colorpicker").length) {
                $(".serset-box .ul-select").removeClass("on");
            }
        });
        //展示客服图标
        $(".serset-box .ul-select ul li.show").hover(function() {
            $("#wqdShowQQD .serShow").removeClass('noshow').addClass('ifshow');
        }, function() {
            $("#wqdShowQQD .serShow").removeClass('ifshow').addClass('noshow');
        })
        $("#wqdShowQQD .serQQ").hover(function() {
            $("#wqdShowQQD .serShow").removeClass('noshow').addClass('ifshow');
        }, function() {})
        $("#wqdShowQQD .serShow").hover(function() {}, function() {
            $("#wqdShowQQD .serShow").removeClass('ifshow').addClass('noshow');
        })

        $(".serset-box textarea.edit,.serset-box input").on("blur", function() {
            _ps.yxupdataServer(_ps.QQarrObj);
        });
        _ps.isOpenQQ();
    }
    /*** 顶部  设置按钮  end ***/
    wqdServerFunc();
})
